/* 추가 모바일 최적화 스타일 - mobile-enhancements.css */

/* 뱃지 모달 애니메이션 */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out;
}

/* 터치 최적화 */
@media (max-width: 768px) {
  /* 기본 컨테이너 설정 - 좌우 잘림 방지 */
  body {
    overflow-x: hidden !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* 메인 컨테이너 */
  .main-container,
  .app-container,
  .content-wrapper {
    max-width: 100% !important;
    overflow-x: hidden !important;
    padding-left: env(safe-area-inset-left, 0px) !important;
    padding-right: env(safe-area-inset-right, 0px) !important;
  }

  /* 게시물 컨테이너 */
  .post-container,
  .enhanced-instagram-post {
    max-width: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
    box-sizing: border-box !important;
  }

  /* 이미지 컨테이너 */
  .image-container,
  .media-container,
  .post-image {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: cover !important;
  }

  /* 게시물 콘텐츠 영역 */
  .post-content,
  .post-body {
    padding: 12px 16px !important;
    box-sizing: border-box !important;
  }
  /* 모든 터치 타겟 최소 크기 44px */
  button, 
  .btn, 
  .button-market, 
  .button-produce,
  input[type="button"],
  input[type="submit"],
  input[type="date"],
  select,
  a[role="button"] {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 12px 16px !important;
    touch-action: manipulation;
  }

  /* 입력 필드 터치 최적화 */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="date"],
  textarea,
  select {
    font-size: 16px !important; /* iOS 줌 방지 */
    padding: 12px 16px !important;
    border-radius: 8px !important;
  }

  /* 카드 터치 피드백 */
  .market-card {
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .market-card:active {
    transform: scale(0.98);
    background-color: #f9fafb;
  }

  /* 네비게이션 바 터치 최적화 */
  .navbar a,
  .navbar button {
    padding: 12px 16px !important;
    margin: 4px !important;
    border-radius: 8px !important;
  }

  /* 하단 네비게이션 터치 영역 확대 */
  .bottom-nav a {
    padding: 16px 12px !important;
    min-height: 60px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* 스와이프 제스처 지원 */
  .swipeable {
    touch-action: pan-y pinch-zoom;
    overscroll-behavior-x: contain;
  }

  /* 드래그 방지 (의도치 않은 선택 방지) */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* 텍스트 가독성 개선 */
  body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
  }

  /* 스크롤 개선 */
  .scroll-smooth {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* 포커스 표시자 개선 */
  button:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 2px solid #22c55e !important;
    outline-offset: 2px !important;
  }

  /* 로딩 상태 개선 */
  .loading-container {
    padding: 40px 20px !important;
    text-align: center;
  }

  .loading-spinner {
    width: 40px !important;
    height: 40px !important;
  }

  /* 에러 메시지 스타일 */
  .error-message {
    padding: 16px !important;
    margin: 16px !important;
    border-radius: 8px !important;
    font-size: 14px !important;
  }

  /* 모달 모바일 최적화 */
  .modal-market {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    max-width: 100% !important;
    max-height: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
    overflow-y: auto !important;
  }

  /* 검색 최적화 */
  .search-container {
    position: sticky !important;
    top: 0 !important;
    z-index: 10 !important;
    background: white !important;
    padding: 16px !important;
    border-bottom: 1px solid #e5e7eb !important;
  }

  /* 가격 표시 최적화 */
  .price-display {
    font-size: 18px !important;
    font-weight: 700 !important;
    line-height: 1.2 !important;
  }

  /* 통계 카드 최적화 */
  .stat-card {
    padding: 16px !important;
    margin: 8px 0 !important;
    border-radius: 12px !important;
  }

  .stat-card .stat-value {
    font-size: 24px !important;
    font-weight: 800 !important;
  }

  .stat-card .stat-label {
    font-size: 12px !important;
    margin-top: 4px !important;
  }

  /* 그리드 간격 조정 */
  .mobile-grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 16px !important;
    padding: 16px !important;
  }

  /* 헤더 최적화 */
  .mobile-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 50 !important;
    background: white !important;
    padding: 12px 16px !important;
    border-bottom: 1px solid #e5e7eb !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  }

  /* 풀다운 새로고침 */
  .pull-to-refresh {
    transform: translateY(0);
    transition: transform 0.3s ease;
  }

  .pull-to-refresh.pulling {
    transform: translateY(50px);
  }

  /* 안전 영역 지원 (iPhone X+) */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }

  /* 하단 네비게이션 안전 영역 */
  .bottom-navigation {
    padding-bottom: calc(env(safe-area-inset-bottom) + 8px);
  }

  /* 진동 피드백 준비 */
  .haptic-feedback {
    cursor: pointer;
  }

  .haptic-feedback:active {
    opacity: 0.7;
  }
}

/* 대형 모바일 기기 (iPhone Plus, Max 등) */
@media (min-width: 414px) and (max-width: 768px) {
  .mobile-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 12px !important;
  }

  .market-card {
    min-height: 160px !important;
  }
}

/* 폴더블 기기 지원 */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .foldable-layout {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 20px !important;
    height: 100vh !important;
  }
}

/* 태블릿 터치 최적화 */
@media (min-width: 641px) and (max-width: 1024px) {
  button,
  .btn {
    min-height: 40px !important;
    padding: 10px 20px !important;
  }

  .market-card {
    min-height: 180px !important;
    padding: 20px !important;
  }
}

/* 고대비 모드 지원 */
@media (prefers-contrast: high) {
  .market-card {
    border: 2px solid #000 !important;
  }

  button,
  .btn {
    border: 2px solid #000 !important;
  }

  .price-display {
    font-weight: 900 !important;
  }
}

/* 저전력 모드 */
@media (prefers-reduced-motion: reduce) {
  .market-card:active {
    transform: none !important;
  }

  .loading-spinner {
    animation: none !important;
  }

  .bounce-subtle {
    animation: none !important;
  }
}